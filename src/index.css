@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  body {
    @apply bg-slate-50 dark:bg-slate-900 text-slate-700 dark:text-slate-300 antialiased;
    font-feature-settings: 'cv02', 'cv03', 'cv04', 'cv11';
    -webkit-tap-highlight-color: transparent;
  }

  /* Smooth theme transitions */
  html {
    transition: color-scheme 0.3s ease;
  }

  html.dark {
    color-scheme: dark;
  }

  ::selection {
    @apply bg-brand-100 dark:bg-brand-800 text-brand-900 dark:text-brand-100;
  }

  /* Scrollbar */
  ::-webkit-scrollbar { width: 6px; height: 6px; }
  ::-webkit-scrollbar-track { background: transparent; }
  ::-webkit-scrollbar-thumb { @apply bg-slate-300 dark:bg-slate-700 rounded-full; }
  ::-webkit-scrollbar-thumb:hover { @apply bg-slate-400 dark:bg-slate-600; }

  /* Better text rendering */
  * {
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  /* Touch-friendly sizing */
  @media (pointer: coarse) {
    button, a, select, input {
      min-height: 44px;
    }
  }
}

@layer components {
  .table-pro th {
    @apply text-xs font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wider;
  }
  .table-pro td {
    @apply text-sm text-slate-600 dark:text-slate-300;
  }

  /* Glass effect for overlays */
  .glass {
    @apply bg-white/80 dark:bg-slate-800/80 backdrop-blur-lg;
  }

  /* Touch-friendly card */
  .touch-card {
    @apply bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 
           p-4 sm:p-5 transition-all active:scale-[0.99] touch-manipulation;
  }
}

@layer utilities {
  .animate-fadeIn {
    animation: fadeIn 0.25s ease-out;
  }

  .animate-slideUp {
    animation: slideUp 0.3s ease-out;
  }

  .animate-slideDown {
    animation: slideDown 0.2s ease-out;
  }

  .animate-bounce-slow {
    animation: bounceSlow 2s ease-in-out infinite;
  }

  .animate-shimmer {
    animation: shimmer 2s linear infinite;
  }

  .animate-pulse-soft {
    animation: pulseSoft 2s ease-in-out infinite;
  }

  /* Premium shimmer effect for skeleton loaders */
  .shimmer {
    position: relative;
    overflow: hidden;
  }

  .shimmer::after {
    position: absolute;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
    transform: translateX(-100%);
    background: linear-gradient(
      90deg,
      transparent,
      rgba(255, 255, 255, 0.4),
      transparent
    );
    animation: shimmer 2s infinite;
    content: '';
  }

  .dark .shimmer::after {
    background: linear-gradient(
      90deg,
      transparent,
      rgba(255, 255, 255, 0.1),
      transparent
    );
  }

  /* Scale animation for interactive elements */
  .animate-scale-in {
    animation: scaleIn 0.15s ease-out;
  }

  /* Fade in up for notifications */
  .animate-fade-in-up {
    animation: fadeInUp 0.3s ease-out;
  }

  /* Premium glow effect */
  .glow {
    box-shadow: 0 0 20px rgba(99, 102, 241, 0.4);
  }

  .dark .glow {
    box-shadow: 0 0 20px rgba(99, 102, 241, 0.6);
  }

  /* Line clamp utility */
  .line-clamp-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  .line-clamp-3 {
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
}

/* ==================== ANIMATIONS ==================== */

@keyframes fadeIn {
  from { opacity: 0; transform: translateY(6px); }
  to { opacity: 1; transform: translateY(0); }
}

@keyframes slideUp {
  from { opacity: 0; transform: translateY(16px); }
  to { opacity: 1; transform: translateY(0); }
}

@keyframes slideDown {
  from { opacity: 0; transform: translateY(-8px); }
  to { opacity: 1; transform: translateY(0); }
}

@keyframes bounceSlow {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-8px); }
}

@keyframes shimmer {
  from { transform: translateX(-100%); }
  to { transform: translateX(100%); }
}

@keyframes pulseSoft {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.7; }
}

@keyframes scaleIn {
  from { 
    opacity: 0; 
    transform: scale(0.95); 
  }
  to { 
    opacity: 1; 
    transform: scale(1); 
  }
}

@keyframes fadeInUp {
  from { 
    opacity: 0; 
    transform: translateY(12px); 
  }
  to { 
    opacity: 1; 
    transform: translateY(0); 
  }
}

/* Premium button interactions */
@keyframes buttonPress {
  from { transform: scale(1); }
  to { transform: scale(0.96); }
}

@keyframes successPulse {
  0% { transform: scale(1); box-shadow: 0 0 0 0 rgba(34, 197, 94, 0.4); }
  70% { transform: scale(1.05); box-shadow: 0 0 0 10px rgba(34, 197, 94, 0); }
  100% { transform: scale(1); box-shadow: 0 0 0 0 rgba(34, 197, 94, 0); }
}

/* ==================== MOBILE RESPONSIVE ==================== */

@media (max-width: 640px) {
  .grid-cols-2 { grid-template-columns: repeat(2, minmax(0, 1fr)); }
}

@media (max-width: 480px) {
  .grid.grid-cols-2 { grid-template-columns: 1fr; }
}

/* Safe area for notched phones */
@supports (padding: max(0px)) {
  .safe-bottom {
    padding-bottom: max(16px, env(safe-area-inset-bottom));
  }
  .safe-top {
    padding-top: max(0px, env(safe-area-inset-top));
  }
}

/* ==================== PRINT ==================== */

@media print {
  body { background: white !important; color: black !important; }
  .no-print { display: none !important; }
  .dark body { background: white !important; }
}

/* ==================== BORDER WIDTH FIX ==================== */
.border-3 {
  border-width: 3px;
}
